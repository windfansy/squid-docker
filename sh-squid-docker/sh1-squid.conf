#Recommended minimum configuration:
http_port 8080
cache_peer hostname parent port 0 no-query login=chenxirong:1qaz@WSX
# cache_peer hostname parent port 0 no-query login=PASS
prefer_direct off
nonhierarchical_direct off
access_log /var/log/squid3/access.log squid

# standards acls
# acl all src 0.0.0.0/0.0.0.0
# acl manager proto cache_object
# acl localhost src 127.0.0.1/255.255.255.255
# acl to_localhost dst 127.0.0.0/8
acl SSL_ports port 443 563
acl Safe_ports port 80          # http
acl Safe_ports port 21          # ftp
acl Safe_ports port 443 563     # https, snews
acl Safe_ports port 70          # gopher
acl Safe_ports port 210         # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280         # http-mgmt
acl Safe_ports port 488         # gss-http
acl Safe_ports port 591         # filemaker
acl Safe_ports port 777         # multiling http
acl CONNECT method CONNECT
# http_access allow manager localhost
# http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
# http_access deny to_localhost

# auth configuration
# auth_param basic program /usr/lib/squid/ncsa_auth /etc/squid/passwd : Specify squid password file and helper program location
# auth_param basic children 5 : The number of authenticator processes to spawn.
# auth_param basic realm Squid proxy-caching web server : Part of the text the user will see when prompted their username and password
# auth_param basic credentialsttl 2 hours : Specifies how long squid assumes an externally validated username:password pair is valid for â€“ in other words how often the helper program is called for that user with password prompt. It is set to 2 hours.
# auth_param basic casesensitive off : Specifies if usernames are case sensitive. It can be on or off only
# acl ncsa_users proxy_auth REQUIRED : The REQURIED term means that any authenticated user will match the ACL named ncsa_users
# http_access allow ncsa_users : Allow proxy access only if user is successfully authenticated.

auth_param basic program /usr/lib/squid3/basic_ncsa_auth /etc/squid3/passwd
auth_param basic children 5
auth_param basic realm Squid proxy-caching web server
auth_param basic credentialsttl 2 hours
auth_param basic casesensitive off
acl ncsa_users proxy_auth REQUIRED
http_access allow ncsa_users
http_access deny all 
